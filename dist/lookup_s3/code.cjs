"use strict";const e={oneOf:[{type:"string"},{type:"object",properties:{__fstring:{type:"string"}}}]};exports.rossum_hook_request_handler=async({configure:t,payload:s,settings:a,variant:r,form:o,hook_interface:i})=>{const p=async(e,t)=>await{results:[]},n=async()=>await{datasets:[{dataset_name:"asdf"}]};if("show_master_data"===r)return o&&o.dataset?{intent:{form:{width:600,defaultValue:{results:(await p()).results.map((e=>({...e,id:e._id})))},uiSchema:{type:"Group",elements:[{type:"Table",scope:"#/properties/results"}]}}}}:{intent:{form:{hook_interface:i,schema:{type:"object",properties:{dataset:{type:"string",enum:(await n()).datasets.map((e=>e.dataset_name))}}}}}};if(!0===t){const t=await n(),s=o&&o.dataset?Object.keys((await p()).results[0]):[];return{intent:{form:{width:600,uiSchema:{type:"VerticalLayout",elements:[{type:"Control",scope:"#/properties/dataset"},{type:"Control",scope:"#/properties/value_key"},{type:"Control",scope:"#/properties/label_key"},{type:"Control",scope:"#/properties/filters",options:{detail:{type:"VerticalLayout",elements:[{type:"Control",scope:"#/properties/match_key"},{type:"FString",scope:"#/properties/value"}]}}}]},schema:{definitions:{fstring:e},type:"object",properties:{dataset:{type:"string",enum:t.datasets.map((e=>e.dataset_name))},value_key:{type:"string",enum:s},label_key:{type:"string",enum:s},filters:{type:"array",items:{type:"object",properties:{match_key:{type:"string",enum:s},value:{$ref:"#/definitions/fstring"}}}}}}}}}}{const e=await p();return{options:e.results.map((e=>({value:e[s.value_key],label:e[s.label_key]}))),value:e.results[0][s.value_key]}}};
